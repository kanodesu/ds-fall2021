{"filter":false,"title":"test.js","tooltip":"/test.js","undoManager":{"mark":46,"position":46,"stack":[[{"start":{"row":0,"column":0},"end":{"row":4,"column":33},"action":"insert","lines":["const fs = require('fs'),","      querystring = require('querystring'),","      got = require('got'),","      async = require('async'),","      dotenv = require('dotenv');"],"id":1}],[{"start":{"row":4,"column":33},"end":{"row":5,"column":0},"action":"insert","lines":["",""],"id":2},{"start":{"row":5,"column":0},"end":{"row":5,"column":6},"action":"insert","lines":["      "]},{"start":{"row":5,"column":6},"end":{"row":6,"column":0},"action":"insert","lines":["",""]},{"start":{"row":6,"column":0},"end":{"row":6,"column":6},"action":"insert","lines":["      "]}],[{"start":{"row":6,"column":5},"end":{"row":6,"column":6},"action":"remove","lines":[" "],"id":3},{"start":{"row":6,"column":4},"end":{"row":6,"column":5},"action":"remove","lines":[" "]},{"start":{"row":6,"column":0},"end":{"row":6,"column":4},"action":"remove","lines":["    "]},{"start":{"row":5,"column":6},"end":{"row":6,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":5,"column":6},"end":{"row":6,"column":0},"action":"insert","lines":["",""],"id":4},{"start":{"row":6,"column":0},"end":{"row":6,"column":6},"action":"insert","lines":["      "]},{"start":{"row":6,"column":6},"end":{"row":7,"column":0},"action":"insert","lines":["",""]},{"start":{"row":7,"column":0},"end":{"row":7,"column":6},"action":"insert","lines":["      "]}],[{"start":{"row":7,"column":5},"end":{"row":7,"column":6},"action":"remove","lines":[" "],"id":5},{"start":{"row":7,"column":4},"end":{"row":7,"column":5},"action":"remove","lines":[" "]},{"start":{"row":7,"column":0},"end":{"row":7,"column":4},"action":"remove","lines":["    "]}],[{"start":{"row":7,"column":0},"end":{"row":7,"column":16},"action":"insert","lines":["dotenv.config();"],"id":6}],[{"start":{"row":7,"column":16},"end":{"row":8,"column":0},"action":"insert","lines":["",""],"id":7},{"start":{"row":8,"column":0},"end":{"row":9,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":9,"column":0},"end":{"row":9,"column":32},"action":"insert","lines":["console.log(process.env.API_KEY)"],"id":8}],[{"start":{"row":9,"column":32},"end":{"row":10,"column":0},"action":"insert","lines":["",""],"id":9}],[{"start":{"row":10,"column":0},"end":{"row":10,"column":32},"action":"insert","lines":["console.log(process.env.API_KEY)"],"id":10}],[{"start":{"row":10,"column":30},"end":{"row":10,"column":31},"action":"remove","lines":["Y"],"id":11},{"start":{"row":10,"column":29},"end":{"row":10,"column":30},"action":"remove","lines":["E"]},{"start":{"row":10,"column":28},"end":{"row":10,"column":29},"action":"remove","lines":["K"]},{"start":{"row":10,"column":27},"end":{"row":10,"column":28},"action":"remove","lines":["_"]},{"start":{"row":10,"column":26},"end":{"row":10,"column":27},"action":"remove","lines":["I"]},{"start":{"row":10,"column":25},"end":{"row":10,"column":26},"action":"remove","lines":["P"]}],[{"start":{"row":10,"column":25},"end":{"row":10,"column":26},"action":"insert","lines":["A"],"id":12}],[{"start":{"row":0,"column":0},"end":{"row":10,"column":27},"action":"remove","lines":["const fs = require('fs'),","      querystring = require('querystring'),","      got = require('got'),","      async = require('async'),","      dotenv = require('dotenv');","      ","      ","dotenv.config();","","console.log(process.env.API_KEY)","console.log(process.env.AA)"],"id":13},{"start":{"row":0,"column":0},"end":{"row":55,"column":0},"action":"insert","lines":["\"use strict\";","","/* global i*/","// dependencies","//npm install async dotenv querystring","const fs = require('fs'),","      querystring = require('querystring'),","      got = require('got'),","      async = require('async'),","      dotenv = require('dotenv');","      ","// TAMU api key","dotenv.config();","const API_KEY = process.env.TAMU_KEY;","const API_URL = 'https://geoservices.tamu.edu/Services/Geocode/WebService/GeocoderWebServiceHttpNonParsed_V04_01.aspx';","","","","// geocode addresses","let meetingsData = [];","let addresses = JSON.parse(fs.readFileSync('/home/ec2-user/environment/week2/address04.json'));","","","// eachSeries in the async module iterates over an array and operates on each item in the array in series","async.eachSeries(addresses, function(value, callback) {","    let query = {","        streetAddress: value,","        city: \"New York\",","        state: \"NY\",","        apikey: API_KEY,","        format: \"json\",","        version: \"4.01\"","    };","","  // construct a querystring from the `query` object's values and append it to the api URL","    let apiRequest = API_URL + '?' + querystring.stringify(query);","","    (async () => {","    \ttry {","    \t\tconst response = await got(apiRequest);","    \t\tlet tamuGeo = JSON.parse(response.body);","    \t\tconsole.log(tamuGeo['FeatureMatchingResultType'], apiRequest);","    \t\tmeetingsData.push(tamuGeo);","    \t} catch (error) {","    \t\tconsole.log(error.response.body);","    \t}","    })();","","    // sleep for a couple seconds before making the next request","    setTimeout(callback, 2000);","}, function() {","    fs.writeFileSync('/home/ec2-user/environment/week3/m04-firstdata.json', JSON.stringify(meetingsData));","    console.log('*** *** *** *** ***');","    console.log(`Number of meetings in this zone: ${meetingsData.length}`);","});    ",""]}],[{"start":{"row":20,"column":95},"end":{"row":21,"column":0},"action":"insert","lines":["",""],"id":14}],[{"start":{"row":21,"column":0},"end":{"row":21,"column":62},"action":"insert","lines":["addresses = JSON.parse(fs.readFileSync('m07_addresses.json'));"],"id":15}],[{"start":{"row":21,"column":40},"end":{"row":21,"column":58},"action":"remove","lines":["m07_addresses.json"],"id":16},{"start":{"row":21,"column":40},"end":{"row":21,"column":87},"action":"insert","lines":["/home/ec2-user/environment/week2/address04.json"]}],[{"start":{"row":20,"column":0},"end":{"row":20,"column":95},"action":"remove","lines":["let addresses = JSON.parse(fs.readFileSync('/home/ec2-user/environment/week2/address04.json'));"],"id":17},{"start":{"row":19,"column":22},"end":{"row":20,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":20,"column":0},"end":{"row":20,"column":1},"action":"insert","lines":["l"],"id":18},{"start":{"row":20,"column":1},"end":{"row":20,"column":2},"action":"insert","lines":["e"]},{"start":{"row":20,"column":2},"end":{"row":20,"column":3},"action":"insert","lines":["t"]}],[{"start":{"row":20,"column":3},"end":{"row":20,"column":4},"action":"insert","lines":[" "],"id":19}],[{"start":{"row":26,"column":28},"end":{"row":26,"column":29},"action":"insert","lines":["."],"id":20}],[{"start":{"row":26,"column":29},"end":{"row":26,"column":30},"action":"insert","lines":["a"],"id":21},{"start":{"row":26,"column":30},"end":{"row":26,"column":31},"action":"insert","lines":["d"]}],[{"start":{"row":26,"column":29},"end":{"row":26,"column":31},"action":"remove","lines":["ad"],"id":22},{"start":{"row":26,"column":29},"end":{"row":26,"column":38},"action":"insert","lines":["addresses"]}],[{"start":{"row":41,"column":68},"end":{"row":42,"column":0},"action":"insert","lines":["",""],"id":23},{"start":{"row":42,"column":0},"end":{"row":42,"column":6},"action":"insert","lines":["    \t\t"]}],[{"start":{"row":42,"column":6},"end":{"row":48,"column":10},"action":"insert","lines":["var tamuGeoItem = {","            address: value + \", New York, NY\",","            latLong: {","                lat: tamuGeo.OutputGeocodes[0].OutputGeocode.Latitude,","                lng: tamuGeo.OutputGeocodes[0].OutputGeocode.Longitude","            }","        };"],"id":24}],[{"start":{"row":42,"column":17},"end":{"row":42,"column":21},"action":"remove","lines":["Item"],"id":25},{"start":{"row":42,"column":17},"end":{"row":42,"column":18},"action":"insert","lines":["2"]}],[{"start":{"row":49,"column":31},"end":{"row":49,"column":32},"action":"insert","lines":["2"],"id":26}],[{"start":{"row":26,"column":29},"end":{"row":26,"column":38},"action":"remove","lines":["addresses"],"id":27},{"start":{"row":26,"column":29},"end":{"row":26,"column":30},"action":"insert","lines":["s"]},{"start":{"row":26,"column":30},"end":{"row":26,"column":31},"action":"insert","lines":["t"]}],[{"start":{"row":26,"column":29},"end":{"row":26,"column":31},"action":"remove","lines":["st"],"id":28},{"start":{"row":26,"column":29},"end":{"row":26,"column":42},"action":"insert","lines":["streetAddress"]}],[{"start":{"row":26,"column":28},"end":{"row":26,"column":42},"action":"remove","lines":[".streetAddress"],"id":29}],[{"start":{"row":43,"column":31},"end":{"row":43,"column":32},"action":"remove","lines":[" "],"id":30},{"start":{"row":43,"column":30},"end":{"row":43,"column":31},"action":"remove","lines":[","]}],[{"start":{"row":43,"column":39},"end":{"row":43,"column":40},"action":"remove","lines":[" "],"id":31},{"start":{"row":43,"column":38},"end":{"row":43,"column":39},"action":"remove","lines":[","]}],[{"start":{"row":43,"column":38},"end":{"row":43,"column":39},"action":"remove","lines":["N"],"id":32},{"start":{"row":43,"column":37},"end":{"row":43,"column":38},"action":"remove","lines":["k"]}],[{"start":{"row":43,"column":37},"end":{"row":43,"column":38},"action":"insert","lines":["k"],"id":33}],[{"start":{"row":43,"column":38},"end":{"row":43,"column":39},"action":"remove","lines":["Y"],"id":34}],[{"start":{"row":43,"column":39},"end":{"row":43,"column":40},"action":"insert","lines":[" "],"id":35},{"start":{"row":43,"column":40},"end":{"row":43,"column":41},"action":"insert","lines":["+"]}],[{"start":{"row":43,"column":41},"end":{"row":43,"column":42},"action":"insert","lines":[" "],"id":36}],[{"start":{"row":43,"column":42},"end":{"row":43,"column":44},"action":"insert","lines":["\"\""],"id":37}],[{"start":{"row":43,"column":43},"end":{"row":43,"column":44},"action":"insert","lines":["Y"],"id":38}],[{"start":{"row":43,"column":43},"end":{"row":43,"column":44},"action":"remove","lines":["Y"],"id":39}],[{"start":{"row":43,"column":43},"end":{"row":43,"column":44},"action":"insert","lines":["N"],"id":40},{"start":{"row":43,"column":44},"end":{"row":43,"column":45},"action":"insert","lines":["Y"]}],[{"start":{"row":12,"column":15},"end":{"row":12,"column":34},"action":"insert","lines":["({path: '../.env'})"],"id":41}],[{"start":{"row":20,"column":16},"end":{"row":20,"column":95},"action":"remove","lines":["JSON.parse(fs.readFileSync('/home/ec2-user/environment/week2/address04.json'));"],"id":42},{"start":{"row":20,"column":16},"end":{"row":20,"column":1215},"action":"insert","lines":["[\"252 West 46th Street\",\"303 West 42nd Street\",\"303 West 42nd Street\",\"305 7th Avenue\",\"1 West 53rd Street\",\"303 West 42nd Street\",\"133 West 46th Street\",\"441 West 26th Street\",\"446 West 33rd Street\",\"252 West 46th Street\",\"252 West 46th Street\",\"252 West 46th Street\",\"339 West 47th Street\",\"303 West 42nd St Rm 306\",\"139 West 31st Street\",\"422 West 57th Street\",\"211 West 30th Street\",\"252 West 46th Street\",\"1 West 53rd Street\",\"422 West 57th Street\",\"7 West 55th Street\",\"252 West 46th Street\",\"729 7th Avenue\",\"538 West 47th Street\",\"1000 Tenth Avenue\",\"303 West 42nd Street\",\"252 West 46th Street\",\"307 West 26th Street\",\"405 West 59th Street\",\"303 West 42nd Street\",\"422 W. 57th St.\",\"133 West 46th Street\",\"133 West 46th Street\",\"303 West 42nd Street\",\"296 9th Avenue\",\"139 West 31st Street\",\"1 West 53rd Street\",\"484 West 43rd Street\",\"7 West 55th Street\",\"252 West 46th Street\",\"252 West 46th Street\",\"4 West 43rd Street\",\"252 West 46th Street\",\"296 Ninth Avenue\",\"1 West 53rd Street\",\"210 West 31st Street\",\"422 West 57th Street\",\"252 West 46th Street\",\"134 West 29th Street - 2nd floor Studio 203\",\"1000 Tenth Avenue\",\"446 West 33rd Street\",\"423 West 46th Street\",\"252 West 46th Street\"]"]}],[{"start":{"row":12,"column":15},"end":{"row":12,"column":34},"action":"remove","lines":["({path: '../.env'})"],"id":44}],[{"start":{"row":43,"column":30},"end":{"row":43,"column":31},"action":"insert","lines":[","],"id":45}],[{"start":{"row":43,"column":31},"end":{"row":43,"column":32},"action":"insert","lines":[" "],"id":46}],[{"start":{"row":43,"column":45},"end":{"row":43,"column":46},"action":"insert","lines":[","],"id":47}],[{"start":{"row":43,"column":46},"end":{"row":43,"column":47},"action":"insert","lines":[" "],"id":48}]]},"ace":{"folds":[],"scrolltop":202.5,"scrollleft":0,"selection":{"start":{"row":43,"column":47},"end":{"row":43,"column":47},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":3,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1632112550227,"hash":"3f805ac03cd9856a8caa30e6d34a132cd3e8ae19"}